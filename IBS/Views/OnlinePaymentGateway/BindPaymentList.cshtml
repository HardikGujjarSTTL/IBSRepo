@model IBS.Models.OnlinePaymentGateway

@{
    Layout = "~/Views/Shared/_FrontendLayout.cshtml";
}

<style>
    .spinner {
        position: fixed;
        z-index: 1031;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
</style>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
<div class="spinner" id="spinner" style="font-size:150px;display:none"><i class="fa fa-spinner fa-spin"></i></div>
<div class="row m-3">
    <div class="col-md-12">
        <h3 class="heading3 mb-4">Transaction Tracking</h3>
    </div>
</div>
<div class="iePieGraphGrid">
   @* <div class="savenext-btn" style="margin-left: 92%;">
        <button type="button" class="save-btn active Permission_Save" onclick="BtnSettlement()">Settlement</button>
    </div>*@
    <table class="borderGrid">
        <tr>
            <th>Sr. No.</th>
            <th>Merchant Tran Ref</th>
            <th>Merchant Tran Date</th>
            <th>Merchant Tran ID</th>
            <th>Atom Tran ID</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
        @if (Model != null && Model.lstPaymentList != null && Model.lstPaymentList.Count > 0)
        {
            var SrNo = 0;
            @foreach (var item in Model.lstPaymentList)
            {
                SrNo = SrNo + 1;
                <tr>
                    <td width="1%" valign="top" align="Left"><font size="1" face="Verdana">@SrNo</font></td>
                    <td width="1%" valign="top" align="Left"><font size="1" face="Verdana">@item.MER_TXN_REF</font></td>
                    <td width="1%" valign="top" align="center"><font size="1" face="Verdana">@item.merchTxnDate</font></td>
                    <td width="1%" valign="top" align="left"><font size="1" face="Verdana">@item.MERTXNID</font></td>
                    <td width="1%" valign="top" align="left"><font size="1" face="Verdana">@item.AtomTXNID</font></td>
                    <td width="1%" valign="top" align="left"><font size="1" face="Verdana">@item.Charges</font></td>
                    <td width="1%" valign="top" align="left"><font size="1" face="Verdana">@item.Status</font></td>
                    <td width="1%" valign="top" align="left">
                        <a href="javascript:void(0);" onclick="editRow('@item.MERTXNID','@item.MER_TXN_REF','@item.merchTxnDate','@item.Charges')">
                            Transaction Tracking
                        </a>
                    </td>
                </tr>
            }
        }
        else
        {
            <tr>
                <td colspan="7">No Data Found</td>
            </tr>
        }
    </table>
</div>
<script>

    function editRow(MERTXNID, MER_TXN_REF, merchTxnDate, Charges) {

        var PaymentList = {
            merchTxnDate: merchTxnDate,
            MER_TXN_REF: MER_TXN_REF,
            MERTXNID: MERTXNID,
            Charges: Charges
        };
        $(".spinner").show();
        var Url = '@Url.Action("TransactionTracking", "OnlinePaymentGateway")';
        var Url1 = '@Url.Action("BindPaymentList", "OnlinePaymentGateway")';
        $.ajax({
            url: Url,
            type: 'GET',
            dataType: 'json',
            data: PaymentList,
            success: function (response) {
                $(".spinner").hide();
                window.location.href = Url1;
            },
            error: function (error) {
                console.error('Error:', error);
            }
        });
    }

    //function BtnSettlement(){
    //    var urlpath = "@Url.Action("SettlementResponse", "OnlinePaymentGateway")";
    //    $.ajax({
    //        url: urlpath,
    //        type: 'POST',
    //        dataType: 'json',
    //        success: function (data) {
                
    //        },
    //        error: function (xhr, textStatus, errorThrown) {
    //        }
    //    });
    //}
</script>