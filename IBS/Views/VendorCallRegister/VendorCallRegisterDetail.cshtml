@model IBS.Models.VenderCallRegisterModel

@{
    ViewData["Title"] = "VENDOR CALL REGISTRATION";
}

<form data-ajax="true" asp-antiforgery="true" asp-controller="VendorCallRegister" asp-action="DetailsSave" data-ajax-method="post" data-ajax-complete="completed" id="frmDetails">

    <div class="list-inner">
        <div class="tast-list">
            <h2>@ViewData["Title"] </h2>
        </div>
        <input type="hidden" asp-for="CaseNo" />
        <input type="hidden" asp-for="CallRecvDt" />
        <input type="hidden" asp-for="CallSno" />
    </div>
    <div class="accordion-body">
        <div class="row my-0">
            <div class="col-md-2 mb-3">
                <label for="Reference">Case No.</label>
                <input type="text" class="input" asp-for="CaseNo" maxlength="100" style="color:orangered" readonly="readonly">
                <span asp-validation-for="CaseNo" class="text-danger"></span>
            </div>
            <div class="col-md-2 mb-3">
                <label for="Reference">Call Date</label>
                <input type="text" class="input" asp-for="CallRecvDt" maxlength="30" style="color:orangered" readonly="readonly">
                <span asp-validation-for="CallRecvDt" class="text-danger"></span>
            </div>
            <div class="col-md-2 mb-3">
                <label for="Reference">Call SNo.</label>
                <input type="text" class="input" asp-for="CallSno" maxlength="30" style="color:orangered" readonly="readonly">
                <span asp-validation-for="CallSno" class="text-danger"></span>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-6 mb-3">
                <label for="Reference">Purchaser</label>
                <input type="text" class="input" asp-for="PoNo" maxlength="100" style="color:orangered" readonly="readonly">
                <span asp-validation-for="PoNo" class="text-danger"></span>
            </div>
            <div class="col-md-6 mb-3">
                <label for="Reference">Vendor</label>
                <input type="text" class="input" asp-for="VendCd" maxlength="30" style="color:orangered" readonly="readonly">
                <span asp-validation-for="VendCd" class="text-danger"></span>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-6 mb-3">
                <label for="Reference">Purchase Order Date</label>
                <input type="text" class="input" asp-for="PoDt" maxlength="100" style="color:orangered" readonly="readonly">
                <span asp-validation-for="PoDt" class="text-danger"></span>
            </div>

            <div class="col-md-6 mb-3">
                <div class="reference">
                    <label for="Name">Purchase Order No.</label>
                    <input type="text" class="input" asp-for="PoNo" maxlength="30" style="color:orangered" readonly="readonly">
                    <span asp-validation-for="PoNo" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-6 mb-3">
                <div class="reference">
                    <label for="Name">Call Status</label>
                    <textarea rows="4" asp-for="CallStatus" style="color:orangered" readonly="readonly"></textarea>
                    <span asp-validation-for="CallStatus" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-6 mb-3">
                <div class="reference">
                    <label for="Name">Region</label>
                    <input type="text" class="input" asp-for="RegionCode" style="color:orangered" readonly="readonly">
                    <span asp-validation-for="RegionCode" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-6 mb-3">
                <div class="reference">
                    <label for="Name">Date of Mark of call to IE</label>
                    <input type="text" class="input" asp-for="CallMarkDt" readonly="readonly">
                    <span asp-validation-for="CallMarkDt" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-6 mb-3">
                <div class="reference">
                    <label for="Name">Call Status date</label>
                    <input type="text" class="input" asp-for="CallStatusDt" readonly="readonly">
                    <span asp-validation-for="CallStatusDt" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-4 mb-3">
                <div class="reference">
                    <label for="Name">Call Install No.</label>
                    <input type="text" class="input" asp-for="CallInstallNo" readonly="readonly">
                    <span asp-validation-for="CallInstallNo" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="Reference">Expected Date of Inspection/Material Readiness Date.</label>
                <input type="text" class="input" asp-for="DtInspDesire" readonly="readonly">
                <span asp-validation-for="DtInspDesire" class="text-danger"></span>
            </div>
            <div class="col-md-4 mb-3">
                <div class="reference">
                    <label for="Name">Call Letter Number\ Dispatch Reference No.</label>
                    <input type="text" class="input" asp-for="CallLetterNo" maxlength="30">
                    <span asp-validation-for="CallLetterNo" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-4 mb-3">
                <div class="reference">
                    <label for="Name">Call Letter Date (DD/MM/YYYY)</label>
                    <input type="text" class="input" asp-for="CallLetterDt" readonly="readonly">
                    <span asp-validation-for="CallLetterDt" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="reference">
                    <label for="Name">Inspecting Engineer to whom Call is marked</label>
                    @Html.DropDownListFor(model => model.IeCd, new SelectList(IBS.Models.Common.GetIEName(@Model.SetRegionCode) , "Value", "Text"),"--Select--")
                    <span asp-validation-for="IeCd" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="reference">
                    <label for="Name">Call Re-Mark Status(If Call has been Re-marked)</label>
                    @Html.DropDownListFor(model => model.CallRemarkStatus, new SelectList(IBS.Models.Common.CallRStatus() , "Value", "Text"),"--Select--")
                    <span asp-validation-for="CallRemarkStatus" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-12 mb-3">
                <div class="reference">
                    <label for="Name">Remarks</label>
                    <label for="Name" style="color:orangered">(250 Chars Maxm)</label>
                    <textarea rows="4" asp-for="Remarks" readonly="readonly"></textarea>
                    <span asp-validation-for="Remarks" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-6 mb-3">
                <div class="reference">
                    <label for="Name">Item to be inspected viz. Mechanical, Electrical, Civil etc</label>
                    @Html.DropDownListFor(model => model.CallRemarkStatus, new SelectList(IBS.Models.Common.Departmentlist() , "Value", "Text"),"--Select--")
                    <span asp-validation-for="CallRemarkStatus" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-6 mb-3">
                <div class="reference">
                    <label for="Name">State whether the Call is for Final Or Stage Inspection</label>
                    <div class="company-checkbox">
                        <div class="remember">
                            <div class="remecheckbox">
                                <input type="radio" id="huey" name="drone" checked disabled="disabled">
                                <label for="huey" id="rdbFinal" name="rdbFinal">Final</label>

                                <input type="radio" id="dewey" name="drone" disabled="disabled">
                                <label for="dewey" id="rdbStage" name="rdbStage">Stage</label>
                            </div>
                        </div>
                    </div>
                    <label for="Name" style="color:DarkMagenta">* Select Stage in case of Stage Inspection Call.</label>

                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-6 mb-3">
                <div class="reference">
                    <label for="Name">State whether the items is on RDSO Vendor Directory</label>
                    <div class="company-checkbox">
                        @foreach (var val in IBS.Models.Common.CommonYesNo())
                        {
                            <div class="remember">
                                <div class="remecheckbox">
                                    <input type="radio" name="ItemRdso" asp-for="ItemRdso" value="@val.Value" id="ItemRdso@(val.Value)" onchange="ononchangeItemRdso()" />
                                    <label for="ItemRdso@(val.Value)">@val.Text</label>
                                </div>
                            </div>
                        }
                    </div>
                    <span asp-validation-for="ItemRdso" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row my-0" id="divRDSOY">
            <div class="col-md-6 mb-3">
                <div class="reference">
                    <label for="Name">If Yes, whether the vendor is RDSO Aprroved. Indicate validity of approval</label>
                    @*<input type="text" class="input" asp-for="CallInstallNo" readonly="readonly">*@
                    <div class="company-checkbox">
                        @foreach (var val in IBS.Models.Common.CommonYesNo())
                        {
                            <div class="remember">
                                <div class="remecheckbox">
                                    <input type="radio" name="VendRdso" asp-for="VendRdso" value="@val.Value" id="VendRdso@(val.Value)" onchange="ononchangeVendRdso()" />
                                    <label for="VendRdso@(val.Value)">@val.Text</label>
                                </div>
                            </div>
                        }
                    </div>
                    <span asp-validation-for="VendRdso" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-3 mb-3" id="divVendApprovalFr">
                <div class="reference">
                    <label for="Name">From</label>
                    <input type="text" class="datepicker" asp-for="VendApprovalFr" id="VendApprovalFr">
                    <span asp-validation-for="VendApprovalFr" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-3 mb-3" id="divVendApprovalTo">
                <div class="reference">
                    <label for="Name">To</label>
                    <input type="text" class="datepicker" asp-for="VendApprovalTo" id="VendApprovalTo">
                    <span asp-validation-for="VendApprovalTo" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-6 mb-3">
                <div class="reference">
                    <label for="Name">Does PO specified staggered DP</label>
                    @*<input type="text" class="input" asp-for="CallInstallNo" readonly="readonly">*@
                    <div class="company-checkbox">
                        @foreach (var val in IBS.Models.Common.CommonYesNo())
                        {
                            <div class="remember">
                                <div class="remecheckbox">
                                    <input type="radio" name="StaggeredDp" asp-for="StaggeredDp" value="@val.Value" id="StaggeredDp@(val.Value)" onchange="ononchangeStaggeredDp()" />
                                    <label for="StaggeredDp@(val.Value)">@val.Text</label>
                                </div>
                            </div>
                        }
                    </div>
                    <span asp-validation-for="StaggeredDp" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row my-0" id="divDPDetails">
            <div class="col-md-3 mb-3">
                <div class="reference">
                    <label for="Name">If yes, details of lot size and staggered DP</label>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="reference">
                    <label for="Name">1. Lot Size & DP</label>
                    <input type="text" class="input" asp-for="LotDp1">
                    <span asp-validation-for="LotDp1" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="reference">
                    <label for="Name">2. Lot Size & DP</label>
                    <input type="text" class="input" asp-for="LotDp2">
                    <span asp-validation-for="LotDp2" class="text-danger"></span>
                </div>
            </div>
        </div>

    </div>
    <div class="row my-0">
        <div class="col-md-3 mb-3">
            <div class="reference">
                <label for="Name" style="color:RoyalBlue;text-decoration:underline;font-size:15pt;">Manufacturer's Information</label>
            </div>
        </div>
        <div class="col-md-4 mb-3">
            <div class="company-checkbox">
                <div class="remember">
                    <div class="remecheckbox">
                        <input type="checkbox" class="input" name="IsSameVender" id="IsSameVender">
                        Same As Vendor
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="accordion-body">
        <div class="row my-0">
            <div class="col-md-6 mb-3">
                <div class="reference">
                    <label for="Name">Name of Manufacturer/Name Of Firm (In case place of inspection is other than place of manufacturer)</label>
                    <input type="text" class="input" id="MfgCd1" value="@Model.MfgCd">
                    @*<span asp-validation-for="MfgCd" class="text-danger"></span>*@
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="reference">
                    <label for="Name"> </label>
                    <div class="savenext-btn">
                        @*<button type="button" class="search-btn" id="SearchDetailsM" onclick="location.href='@Url.Action("VendorCallRegisterDetail", "VendorCallRegister",new { Action = "M",CaseNo = @Model.CaseNo,CallRecvDt = Convert.ToDateTime(@Model.CallRecvDt).ToString("dd-MM-yyyy"), CallSno = @Model.CallSno })'">Select Manufacturer</button>*@
                        <button type="button" class="search-btn" id="SearchDetailsM">Select Manufacturer</button>
                    </div>
                    <span asp-validation-for="CallInstallNo" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-12 mb-3">
                <div class="savenext-btn">
                    @Html.DropDownListFor(model => model.MfgCd, new SelectList(IBS.Models.Common.GetVendor_City(@Model.MfgCd) , "Value", "Text"),"--Select--")
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-12 mb-3">
                <div class="reference">
                    <label for="Name">Place of Inspection</label>
                    <textarea rows="4" asp-for="VendAdd1"></textarea>
                    <span asp-validation-for="VendAdd1" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-4 mb-3">
                <div class="reference">
                    <label for="Name">Contact Person's Name</label>
                    <input type="text" class="input" asp-for="VendContactPer1">
                    <span asp-validation-for="VendContactPer1" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="reference">
                    <label for="Name">Manufacturer Email</label>
                    <input type="text" class="input" asp-for="VendEmail">
                    <span asp-validation-for="VendEmail" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="reference">
                    <label for="Name">Phone No.</label>
                    <input type="text" class="input" asp-for="VendContactTel1">
                    <span asp-validation-for="VendContactTel1" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="savenext-btn">
                    <button type="button" class="save-btn" id="btnUpdateMDetails">Update Manufacturer's Contact Details.</button>
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-6 mb-3">
                <div class="reference">
                    <label for="Name" style="color:orangered">In case of IRFC Funded Project, Select 'Yes'</label>
                    @*<input type="text" class="input" asp-for="CallInstallNo" readonly="readonly">*@
                    <div class="company-checkbox">
                        @foreach (var val in IBS.Models.Common.CommonYesNo())
                        {
                            <div class="remember">
                                <div class="remecheckbox">
                                    <input type="radio" name="IrfcFunded" asp-for="IrfcFunded" value="@val.Value" id="IrfcFunded@(val.Value)" />
                                    <label for="IrfcFunded@(val.Value)">@val.Text</label>
                                </div>
                            </div>
                        }
                    </div>
                    <span asp-validation-for="CallInstallNo" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-12 mb-3">
                <div class="reference">
                    <label for="Name">Bill Paying Officer & Address</label>
                    <label for="Name" style="color:orangered">(Mention the Name of the party in whose favour invoice is to be raised and it's Address.)</label>
                    <input type="text" class="input" asp-for="Bpo" readonly="readonly">
                    <span asp-validation-for="Bpo" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-12 mb-3">
                <div class="reference">
                    <label for="Name">GSTIN No.</label>
                    <label for="Name" style="color:orangered">(Mention the GST NO. of the party in whose favour invoice is to be raised.)</label>
                    <input type="text" class="input" asp-for="RecipientGstinNo" readonly="readonly">
                    <span asp-validation-for="RecipientGstinNo" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="col-md-6 mb-3">
                <div class="company-checkbox">
                    <div class="remember">
                        <div class="remecheckbox">
                            <input type="checkbox" class="input" name="IsNewVender">
                            <label for="Name" style="color:orangered">Kindly Check this option, If You are a New Vendor!!!</label>
                        </div>
                    </div>
                </div>
                @*<span asp-validation-for="CallInstallNo" class="text-danger"></span>*@
            </div>
        </div>
    </div>
    <section class="table-section">
        <div class="task-listinput">
            <div class="dash-table">
                <table id="dtList" class="table-responsive">
                    <thead>
                        <tr>
                            @*<th>#</th>*@
                            <th>Item SNo.</th>
                            <th>Status</th>
                            <th>Item Desc</th>
                            <th>Consignee</th>
                            <th>Qty. Ord</th>
                            <th>Cumm Qty off Prev</th>
                            <th>Qty Prev Passed</th>
                            <th>Qty Offered Now</th>
                            <th>Qty Passed</th>
                            <th>Qty Rejected</th>
                            <th>Qty Due</th>
                            <th>Delivery Date</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <div class="accordion-body">
        <div class="row my-0">
            <div class="col-md-3 mb-3">
            </div>
            <div class="col-md-6 mb-3">
                <label for="Name" style="color:red">* Click on Register Call Button Once only</label>
                <br/>
                <label for="Name" style="color:red">* Enter the Quantity Offered Now of All the Items Which You want to be Inspected in this call.</label>
                <br/>
                <div class="savenext-btn">
                    <a asp-controller="VendorCallRegisterDetail" asp-action="VendorCallRegister" class="reset-btn">Cancel</a>
                    <button type="button" class="save-btn active" id="btnRegiserCallSave">Save</button>
                </div>
            </div>
            <div class="col-md-3 mb-3">
            </div>
        </div>
        
    </div>
</form>
@section scripts{
    <partial name="_DataTablesScriptsPartial" />
    <partial name="_ValidationScriptsPartial" />
    <script>
        $(document).ready(function () {
            $("#ItemRdsoY").prop("checked", true);
            $("#VendRdsoY").prop("checked", true);
            $("#StaggeredDpY").prop("checked", true);

            $("#MfgCd").prop("disabled", "disabled");

            DateFormate();
            InitializeDatatable();


        });

        function DateFormate() {
            $('#VendApprovalFr').datepicker({
                changeMonth: true,
                changeYear: true,
                dateFormat: 'dd-mm-yy',
            });
            $('#VendApprovalTo').datepicker({
                changeMonth: true,
                changeYear: true,
                dateFormat: 'dd-mm-yy',
            });
        }

        //function UpdateMDetails() {
        //    alert(1);
        //}

        function Save() {
            if ($("#frmDetails").valid()) {
                $("#frmDetails").submit();
            }
        }

        completed = function (response) {
            var res = response.responseJSON;
            ShowHideMsgNew(res.status, res.responseText);
            //window.location.href = "/VendorCallRegister/VendorCallRegister";
            window.location.href = '@Url.Action("VendorCallRegister", "VendorCallRegister")';
        };

        function InitializeDatatable() {
            var CaseNo = $("#CaseNo").val();
            var CallRecvDt = $("#CallRecvDt").val();
            var CallSno = $("#CallSno").val();

            $("#dtList").DataTable({
                stateSave: false,// Design Assets
                autoWidth: true,
                scrollX: true,
                scrollCollapse: true,
                processing: true, // ServerSide Setups
                serverSide: true,
                destroy: true,
                paging: true,// Paging Setups
                ordering: false,
                searching: false,// Searching Setups
                ajax: {// Ajax Filter
                    url: "@Url.Action("LoadTableList", "VendorCallRegister")",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    data: function (d) {
                        var AdditionalValues = {
                            "CaseNo": CaseNo,
                            "CallRecvDt": CallRecvDt,
                            "CallSno": CallSno
                        };
                        d.AdditionalValues = AdditionalValues;
                        return JSON.stringify(d);
                    }
                },

                columns: [// Columns Setups
                    {
                        data: '', orderable: false, width: '5%',
                        render: function (data, type, row, meta) {
                            return meta.row + meta.settings._iDisplayStart + 1;
                        }
                    },
                    { data: "Status" },
                    { data: "ItemDescPo" },
                    { data: "Consignee" },
                    { data: "QtyOrdered" },
                    { data: "CumQtyPrevOffered" },
                    { data: "CumQtyPrevPassed" },
                    { data: "QtyToInsp" },
                    { data: "QtyPassed" },
                    { data: "QtyRejected" },
                    { data: "QtyDue" },
                    { data: "DelvDate" },


                ],
                "order": [[0, "asc"]]
            });
        }

        function ononchangeItemRdso() {
            var ItemRdso = $('input:radio[name=ItemRdso]:checked').val();
            if (ItemRdso == 'Y') {
                $("#divRDSOY").show();
            }
            else {
                $("#divRDSOY").hide();
                $("#VendApprovalFr").val("");
                $("#VendApprovalTo").val("");
            }
        }

        function ononchangeVendRdso() {
            var VendRdso = $('input:radio[name=VendRdso]:checked').val();
            if (VendRdso == 'Y') {
                $("#divVendApprovalFr").show();
                $("#divVendApprovalTo").show();
            }
            else {
                $("#divVendApprovalFr").hide();
                $("#divVendApprovalTo").hide();
                $("#VendApprovalFr").val("");
                $("#VendApprovalTo").val("");
            }
        }

        function ononchangeStaggeredDp() {
            var StaggeredDp = $('input:radio[name=StaggeredDp]:checked').val();
            if (StaggeredDp == 'Y') {
                $("#divDPDetails").show();
            }
            else {
                $("#divDPDetails").hide();
                $("#LotDp1").val("");
                $("#LotDp2").val("");
            }
        }

        $("#SearchDetailsM").click(function () {
            FillVendorClick();
        });

        $('#IsSameVender').change(function () {
            var StaggeredDp = $('input:checkbox[name=IsSameVender]:checked').val();
            if (this.checked) {
                FillVendor();
            }
            else {
                $("#MfgCd").val("");
                $("#MfgCd1").val("");
                $("#VendAdd1").val("");
                $("#VendContactPer1").val("");
                $("#VendEmail").val("");
                $("#VendContactTel1").val("");
            }

        });

        function FillVendor() {
            var MfgCd = $('#MfgCd').val();
            var hdnMfgCd = $("#MfgCd1").val();

            if (MfgCd == null) {
                MfgCd = 0;
            }
            $.ajax({
                url: '@Url.Action("GetVendorDetails", "VendorCallRegister")',
                type: "GET",
                dataType: "JSON",
                data: { id: MfgCd },
                success: function (contacts) {
                    if (contacts.data && contacts.data.length > 0) {
                        $("#MfgCd").val(contacts.data[0].VendCd);
                        $("#MfgCd1").val(contacts.data[0].VendCd);
                        $("#VendAdd1").val(contacts.data[0].VendAdd1);
                        $("#VendContactPer1").val(contacts.data[0].VendContactPer1);
                        $("#VendEmail").val(contacts.data[0].VendEmail);
                        $("#VendContactTel1").val(contacts.data[0].VendContactTel1);

                        hdnMfgCd = contacts.data[0].VendCd;
                        BindVendor(hdnMfgCd);
                        $("#MfgCd").val(hdnMfgCd);
                    }
                }
            });

        }

        function FillVendorClick() {
            var MfgCd = $('#MfgCd1').val();
            BindVendor(MfgCd);
            $.ajax({
                url: '@Url.Action("GetVendorDetailsClick", "VendorCallRegister")',
                type: "GET",
                dataType: "JSON",
                data: { id: MfgCd },
                success: function (contacts) {
                    if (contacts.data && contacts.data.length > 0) {
                        $("#MfgCd").val(contacts.data[0].VendCd);
                        $("#MfgCd1").val(contacts.data[0].VendCd);
                        $("#VendAdd1").val(contacts.data[0].VendAdd1);
                        $("#VendContactPer1").val(contacts.data[0].VendContactPer1);
                        $("#VendEmail").val(contacts.data[0].VendEmail);
                        $("#VendContactTel1").val(contacts.data[0].VendContactTel1);
                    }
                }
            });
        }

        function BindVendor(MfgCd1) {
            //var MfgCd1 = $('#MfgCd1').val();
            $.ajax({
                url: '@Url.Action("BindVendor", "VendorCallRegister")',
                type: "GET",
                dataType: "JSON",
                data: { id: MfgCd1 },
                success: function (contacts) {
                    $("#MfgCd").html(""); // clear before appending new list
                    $("#MfgCd").append($('<option></option>').val(0).html("--Select--"));
                    if (contacts && contacts.length > 0) {
                        if (MfgCd1 > 0) {
                            $.each(contacts, function (i, cnt) {
                                $("#MfgCd").append($('<option></option>').val(cnt.Value).html(cnt.Text));
                            });
                            $("#MfgCd").val(MfgCd1);
                        } else {
                            $.each(contacts, function (i, cnt) {
                                $("#MfgCd").append($('<option></option>').val(cnt.Value).html(cnt.Text));
                            });
                        }
                    }
                }
            });
        }

        $("#btnUpdateMDetails").click(function () {
            var formData = {
                MfgCd: $("#MfgCd").val(),
                VendCd: $("#VendCd").val(),
                VendAdd1: $("#VendAdd1").val(),
                VendContactPer1: $("#VendContactPer1").val(),
                VendEmail: $("#VendEmail").val(),
                VendContactTel1: $("#VendContactTel1").val(),
            }
            $.post("@Url.Action("UpdateDetails", "VendorCallRegister")", { model: formData }, function (response) {
                ShowHideMsgNew(response.status, response.responseText);
                if (response.status) {
                    //$("#PropertyId").val(response.PropertyID);
                    //$("#Id").val(response.PropertyID);
                    //if ($('#PropertyId').val() > 0) {
                    //    $(".nav-link").css("pointer-events", "all");
                    //}
                    //if ($("#Id").val() == "0") {
                    //    gotoTab('inspection-tab');
                    //}
                    //else {
                    //    gotoTab('InsuranceDetail-tab');
                    //}
                }
            });

            return false;
        });


        $("#btnRegiserCallSave").click(function () {
            var formData = {
                //MfgCd: $("#MfgCd").val(),
                //VendCd: $("#VendCd").val(),
                //VendAdd1: $("#VendAdd1").val(),
                //VendContactPer1: $("#VendContactPer1").val(),
                //VendEmail: $("#VendEmail").val(),
                //VendContactTel1: $("#VendContactTel1").val(),
                //VendContactTel1: $("#VendContactTel1").val(),
                //VendContactTel1: $("#VendContactTel1").val(),
                //VendContactTel1: $("#VendContactTel1").val(),
            }
            $.post("@Url.Action("DetailsSave", "VendorCallRegister")", { model: formData }, function (response) {
                ShowHideMsgNew(response.status, response.responseText);
                if (response.status) {
                }
            });

            return false;
        });

    </script>
}