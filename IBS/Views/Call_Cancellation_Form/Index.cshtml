@model IBS.Models.Call_Cancellation_FormModel
<div class="list-inner">
    <div class="tast-list">
        <h2>CALL CANCELLATION</h2>
    </div>
    <div>
        @*<a asp-action="AddRecieptVoucher" asp-controller="AddRecieptVoucher" class="formBtn viewall-btn">View List</a>*@
    </div>
</div>
<section>
    <div class="task-listinput">
        <div class="accordion-body">
            <form method="post" id="frmcallcancellation" asp-controller="Call_Cancellation_Form" asp-action="Save">
                <div class="accordion-body">
                    <div class="row my-0">
                        <div class="col-md-4 mb-4">
                            <label for="Reference">Case No.</label>
                        <input type="text" asp-for="CASE_NO" id="caseNo" readonly="true" maxlength="300" />
                        </div>

                        <div class="col-md-4 mb-4">
                            <label for="Reference">Call Date</label>
                            <input type="text" readonly="true" asp-for="CALL_DATE" id="calldate" maxlength="500" />

                        </div>

                        <div class="col-md-4 mb-4">
                            <label for="Reference">Call Sno.</label>
                            <input type="text" readonly="true" asp-for="CALL_SNO" id="callsno" maxlength="500" />

                        </div>

                        <div class="col-md-4 mb-4">
                            <label for="Reference">Purchase Order No.</label>
                            <input type="text" readonly="true" asp-for="PO_NO" id="pono" maxlength="500" />

                        </div>

                        <div class="col-md-4 mb-4">
                            <label for="Reference">Purchase Order Date</label>
                            <input type="text" readonly="true" asp-for="PO_DT" id="podt" maxlength="500" />

                        </div> 

                        <div class="col-md-4 mb-4">
                            <label for="Reference">Vendor</label>
                            <input type="text" readonly="true" asp-for="VENDOR" id="vendor" maxlength="500" />

                        </div>

                        <div class="col-md-4 mb-4">
                            <label for="Reference">Inspection Engineer</label>
                            
                           <input type="text" id="Inspection_Engineer" class="input"  asp-for="Inspection_Engineer">

                        </div>
                        <div class="col-md-4 mb-4">
                          <label for="Reference">Cancellation Date:</label>
                          <input type="text" id="cancellation_dt" class="input" asp-for="CANCEL_DATE">

                        </div>
                         <div class="col-md-4 mb-4">
                            <label for="callSelect">Call:</label>
                            <select id="callSelect" name="call">
                                <option value="C">Call Chargeable</option>
                                <option value="N">Call Nonchargeable</option>
                            </select>
                         </div>
                         <div class="col-md-12 mb-4">
                             
                            <label for="reference" class="h4">Reasons For Cancellation:</label>
                            
                                <div class="form-check">
                                     @Html.CheckBoxFor(x => x.Chk1, new { @class = "form-check-input" })
                                    <label class="form-check-label" for="issue01">01 - Material Not Found</label>
                                </div>
                                <div class="form-check">
                                  @Html.CheckBoxFor(x => x.Chk2, new { @class = "form-check-input" })

                                    <label class="form-check-label" for="issue02">02 - Call letter received after expiry of delivery period</label>
                                </div>
                                <div class="form-check">
                                 @Html.CheckBoxFor(x => x.Chk3, new { @class = "form-check-input" })

                                    <label class="form-check-label" for="issue03">03 - Your call letter was not in prescribed format</label>
                                </div>
                                <div class="form-check">
                                  @Html.CheckBoxFor(x => x.Chk4, new { @class = "form-check-input" })

                                    <label class="form-check-label" for="issue04">04 - Your refusal to undertake test on samples in approved independent test houses or RITES Lab at your cost (Whichever applicable)</label>
                                </div>
                                <div class="form-check">
                                 @Html.CheckBoxFor(x => x.Chk5, new { @class = "form-check-input" })

                                    <label class="form-check-label" for="issue05">05 - Material offered at premises where adequate room or lighting etc. not available for proper sampling or inspection.</label>
                                </div>
                                <div class="form-check">
                                  @Html.CheckBoxFor(x=>x.Chk6, new { @class = "form-check-input" })
                                    <label class="form-check-label" for="issue06">06 - Internal inspection and test records incomplete / not as per contractual requirement.</label>
                                </div>
                                <div class="form-check">
                                  @Html.CheckBoxFor(x=>x.Chk7 , new { @class = "form-check-input" })
                                    <label class="form-check-label" for="issue07">07 - Packing list showing quantities offered item wise and consignee wise not read (Whichever applicable)</label>
                                </div>
                                <div class="form-check">
                                  @Html.CheckBoxFor(x=>x.Chk8 , new { @class = "form-check-input" })
                                    <label class="form-check-label" for="issue08">08 - Lot mixed not segregated. Please re-offer after proper segregation.</label>
                                </div>
                                <div class="form-check">
                                  @Html.CheckBoxFor(x=>x.Chk9 , new { @class = "form-check-input" })
                                    <label class="form-check-label" for="issue09">09 - You could not arrange for inspection in spite of personal contact / phone with your Shri.</label>
                                </div>
                                <div class="form-check">
                                  @Html.CheckBoxFor(x=>x.Chk10 , new { @class = "form-check-input" })
                                    <label class="form-check-label" for="issue10">10 - You could not produce following documents drg, / spec. / P.O.: at the time of inspection in absence of which inspection could not be done.</label>
                                </div>
                                <div class="form-check">
                                  @Html.CheckBoxFor(x=>x.Chk11 , new { @class = "form-check-input" })
                                  <label class="form-check-label" for="issue11">11 - Call Withdrawn By Vendor</label>
                                </div>
                                <div class="form-check">
                                  @Html.CheckBoxFor(x=>x.Chk12 , new { @class = "form-check-input" })
                                    <label class="form-check-label" for="issue12">12 - Others (Specify)</label>
                                </div>
                                <label for="docReclbl">Call Cancellation Document Received or Not (Y/N) :</label>
                                 <select asp-for="CALL_CANCEL_STATUS" id="docRec" name="doc">
                                    <option value="Y">Yes</option>
                                    <option value="N">No</option>
                                </select>

                               <label for="Reference">Cancellation Description:-</label>
                              <input type="text" asp-for="CANCEL_DESC" id="calldesc" maxlength="1000" />
                         </div>
                    </div>

                    <div class="savenext-btn">
                        <button type="submit" class="save-btn active " onclick="Save();">Save</button>
                        <button type="button" class="save-btn active Permission_Save" onclick="Delete();">Delete</button>
                        <button type="button" class="save-btn active Permission_Save" onclick="Cancel();">Cancel</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>

@section scripts{
    <partial name="_DataTablesScriptsPartial" />
    <partial name="_ValidationScriptsPartial" />
    <script type="text/javascript">
        $(document).ready(function () {
            debugger;
        
            
        });
        function Save() {
            debugger;

            $("#frmcallcancellation").submit();

           
        

        }
        completed = function (response) {
            var res = response.responseJSON;
            ShowHideMsgNew(res.status, res.responseText);
            window.location.href = "/Call_Cancellation_Form/Index";
        }
   

        function Delete(){
                // Get the values from the input fields
            var caseNo = $("#caseNo").val();
            var calldate = $("#calldate").val();
            var callsno = $("#callsno").val();

               
             
               
                $.ajax({
                url: '/Call_Cancellation_Form/Delete', 
                    type: 'POST',
                data: { caseNo: caseNo ,
                    calldate: calldate,
                    callsno: callsno
                },
                    success: function (result) {
                       
                        if (result.alert != null) {
                            alert(result.alert); 
                        } else {
                            alert(result.responseText); 
                        }
                    },
                    error: function () {
                        alert("An error occurred during the AJAX request.");
                    }
                });
            
        }

       



    </script>
    }