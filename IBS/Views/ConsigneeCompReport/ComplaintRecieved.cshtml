@model IBS.Models.Reports.JIRequiredReport

<div>
    
    @if (@Model.Detailed == "false")
    {
        <h3 class="center">@Model.Regions</h3>
        @if (@Model.FromDate != null && Convert.ToDateTime(@Model.FromDate) != DateTime.MinValue)
        {
            <h3 class="heading3">Complaint Recieved For The Period : <span class="orangeText"> (@Model.FromDate To @Model.ToDate) </span>@((Model.ClientWise == "true") ? "(Client Wise)" : "")@((Model.ConsigneeWise == "true") ? "(Consignee Wise)" : "")@((Model.IEWise == "true") ? "(IE Wise)" : "") @((Model.VendorWise == "true") ? "(Vendor Wise)" : "") @((Model.CMWise == "true") ? "(CM Wise)" : "")</h3>
        }
        else
        {
            <h3 class="heading3">Complaint Recieved For The Period : <span class="orangeText"> (@Model.FinancialYears) </span>@((Model.ClientWise == "true") ? "(Client Wise)" : "")@((Model.ConsigneeWise == "true") ? "(Consignee Wise)" : "")@((Model.IEWise == "true") ? "(IE Wise)" : "") @((Model.VendorWise == "true") ? "(Vendor Wise)" : "") @((Model.CMWise == "true") ? "(CM Wise)" : "")</h3>
        }
        <br>
        <br>

        <div class="tableOuter">
            <table class="borderTable" cellpadding="0" cellspacing="0">
                <tbody>
                    <tr>
                        <th  valign="top" align="center"><b>Name</b></th>
                        <th  valign="top" align="center"><b>Total No. of Inspections</b></th>
                        <th  valign="top" align="center"><b>Total Value of Inspections</b></th>
                        <th  valign="top" align="center"><b>Recd</b></th>
                        <th  valign="top" align="center"><b>Finalised</b></th>
                        <th  valign="top" align="center"><b>Pending</b></th>
                        <th  valign="top" align="center"><b>Accepted</b></th>
                        <th  valign="top" align="center"><b>Upheld (1)</b></th>
                        <th  valign="top" align="center"><b>Sorting (2)</b></th>
                        <th  valign="top" align="center"><b>Rectification (3)</b></th>
                        <th  valign="top" align="center"><b>Price Reduction (4)</b></th>
                        <th  valign="top" align="center"><b>Lifted Before JI (5)</b></th>
                        <th  valign="top" align="center"><b>Not On Rites A/c</b></th>
                        <th  valign="top" align="center"><b>Transit Damage</b></th>
                        <th  valign="top" align="center"><b>Unstamped</b></th>
                        <th  valign="top" align="center"><b>Total (1+2+3+4+5)</b></th>
                    </tr>
                    @if (Model != null && Model.lstJIRequiredList.Count > 0)
                    {
                        decimal totmaterial = 0, toRecd = 0, tofinalised = 0, topending = 0, toaccepted = 0, touheld = 0, tosorting = 0, torectification = 0, toprice = 0, tounstamped = 0, toliftedji = 0, toritesac = 0, todemage = 0, tosubtotal = 0;
                        @foreach (var item in Model.lstJIRequiredList)
                        {
                            totmaterial = totmaterial + item.MATERIAL_VALUE;
                            toRecd = toRecd + item.RECD;
                            tofinalised = tofinalised + item.FINALISED;
                            topending = topending + item.PENDING;
                            toaccepted = toaccepted + item.ACCEPTED;
                            touheld = touheld + item.UPHELD;
                            tosorting = tosorting + item.SORTING;
                            torectification = torectification + item.RECTIFICATION;
                            toprice = toprice + item.PRICE_REDUCTION;
                            toliftedji = toliftedji + item.LIFTED_BEFORE_JI;
                            toritesac = toritesac + item.NOT_ON_RITES_AC;
                            todemage = todemage + item.TRANSIT_DEMAGE;
                            tounstamped = tounstamped + item.UNSTAMPED;
                            tosubtotal = tosubtotal + item.Total;
                            <tr>
                                <td  valign="top" align="Left">@item.IE</td>
                                <td  valign="top" align="center">@item.NO_OF_INSPECTION</td>
                                <td  valign="top" align="right">@item.MATERIAL_VALUE</td>
                                <td  valign="top" align="right">@item.RECD</td>
                                <td  valign="top" align="right">@item.FINALISED</td>
                                <td  valign="top" align="right">@item.PENDING</td>
                                <td  valign="top" align="right">@item.ACCEPTED</td>
                                <td  valign="top" align="right">@item.UPHELD</td>
                                <td  valign="top" align="right">@item.SORTING</td>
                                <td  valign="top" align="right">@item.RECTIFICATION</td>
                                <td  valign="top" align="right">@item.PRICE_REDUCTION</td>
                                <td  valign="top" align="right">@item.LIFTED_BEFORE_JI</td>
                                <td  valign="top" align="right">@item.NOT_ON_RITES_AC</td>
                                <td  valign="top" align="right">@item.TRANSIT_DEMAGE</td>
                                <td  valign="top" align="right">@item.UNSTAMPED</td>
                                <td  valign="top" align="right">@item.Total</td>
                            </tr>
                        }
                        <tr>
                            <td  valign="top" align="Left" colspan="2"><b>Totals</b></td>
                            <td  valign="top" align="right"><b>@totmaterial</b></td>
                            <td  valign="top" align="right"><b>@toRecd</b></td>
                            <td  valign="top" align="right"><b>@tofinalised</b></td>
                            <td  valign="top" align="right"><b>@topending</b></td>
                            <td  valign="top" align="right"><b>@toaccepted</b></td>
                            <td  valign="top" align="right"><b>@touheld</b></td>
                            <td  valign="top" align="right"><b>@tosorting</b></td>
                            <td  valign="top" align="right"><b>@torectification</b></td>
                            <td  valign="top" align="right"><b>@toprice</b></td>
                            <td  valign="top" align="right"><b>@toliftedji</b></td>
                            <td  valign="top" align="right"><b>@toritesac</b></td>
                            <td  valign="top" align="right"><b>@todemage</b></td>
                            <td  valign="top" align="right"><b>@tounstamped</b></td>
                            <td  valign="top" align="right"><b>@tosubtotal</b></td>
                        </tr>

                    }
                </tbody>
            </table>
        </div>
    }
    <br>
    <br>
    @if (@Model.Detailed == "true")
    {
        <div class="tableOuter">
            <table class="borderTable" cellpadding="0" cellspacing="0">
                <tbody>
                    <tr>
                        <th width="100%" valign="top" align="Center" colspan="29"><font size="2" face="Verdana">Compliant Recieved During the Period: (@Model.FinancialYears)  @((Model.ClientWise == "true") ? "(Sorted On Client)" : "")@((Model.ConsigneeWise == "true") ? "(Sorted On Consignee)" : "")@((Model.IEWise == "true") ? "(Sorted On IE)" : "") @((Model.VendorWise == "true") ? "(Sorted On Vendor)" : "") @((Model.CMWise == "true") ? "(Sorted On CM)" : "")</th>
                        <th colspan="7"  valign="top" align="center"><b><font size="2" face="Verdana">Corrective & Preventive Action Identified</b></th>
                    </tr>
                    <tr>
                        <th  valign="top" align="center"><b>S.No.</b></th>
                        <th  valign="top" align="center"><b>Region</b></th>
                        <th  valign="top" align="center"><b>Complaint ID</b></th>
                        <th  valign="top" align="center"><b>Unique SNO.</b></th>
                        <th  valign="top" align="center"><b>Firm</b></th>
                        <th  valign="top" align="center"><b>PO No.</b></th>
                        <th  valign="top" align="center"><b>Date</b></th>
                        <th  valign="top" align="center"><b>BK NO & Set NO</b></th>
                        <th  valign="top" align="center"><b>Date of IC</b></th>
                        <th  valign="top" align="center"><b>Item</b></th>
                        <th  valign="top" align="center"><b>Consignee</b></th>
                        <th  valign="top" align="center"><b>IE</b></th>
                        <th  valign="top" align="center"><b>Qty Offered</b></th>
                        <th  valign="top" align="center"><b>Qty Rejected</b></th>
                        <th  valign="top" align="center"><b>Value of Rejected Stores</b></th>
                        <th  valign="top" align="center"><b>Discipline</b></th>
                        <th  valign="top" align="center"><b>Date of 1st Reference</b></th>
                        <th  valign="top" align="center"><b>REJ MEMO</b></th>
                        <th  valign="top" align="center"><b>Reason of Rejection</b></th>
                        <th  valign="top" align="center"><b>Reason of No JI</b></th>
                        <th  valign="top" align="center"><b>Date of JI</b></th>
                        <th  valign="top" align="center"><b>Inspection Document</b></th>
                        <th  valign="top" align="center"><b>Status (Decision taken by JI Committe)</b></th>
                        <th  valign="top" align="center"><b>JI REPORT</b></th>
                        <th  valign="top" align="center"><b>Defect Code</b></th>
                        <th  valign="top" align="center"><b>Classfication</b></th>
                        <th  valign="top" align="center"><b>Conclusion Dt</b></th>
                        <th  valign="top" align="center"><b>CM</b></th>
                        <th  valign="top" align="center"><b>JI Engineer</b></th>
                        <th  valign="top" align="center"><b>Root Cause Analysis</b></th>
                        <th  valign="top" align="center"><b>Checksheet Status</b></th>
                        <th  valign="top" align="center"><b>Tech Ref</b></th>
                        <th  valign="top" align="center"><b>D&AR Proposed</b></th>
                        <th  valign="top" align="center"><b>Any Other</b></th>
                        <th  valign="top" align="center"><b>Status of CAPA</b></th>
                        <th  valign="top" align="center"><b>D&AR Status (if Any)</b></th>
                    </tr>
                    @if (Model != null && Model.lstConsigneeComplaints.Count > 0)
                    {
                        @foreach (var item in Model.lstConsigneeComplaints)
                        {
                            <tr>
                                <td  valign="top" align="Left">@item.IN_REGION</td>
                                <td  valign="top" align="Left">@item.COMPLAINT_ID</td>
                                <td  valign="top" align="Left">@item.JI_SNO</td>
                                <td  valign="top" align="Left">@item.VENDOR</td>
                                <td  valign="top" align="Left">@item.PO_NO</td>
                                <td  valign="top" align="Left">@item.PO_DATE</td>
                                <td  valign="top" align="Left">@item.BK_SET</td>
                                <td  valign="top" align="Left">@item.IC_DATE</td>
                                <td  valign="top" align="Left">@item.ITEM_DESC</td>
                                <td  valign="top" align="Left">@item.CONSIGNEE</td>
                                <td  valign="top" align="Left">@item.IE_NAME</td>
                                <td  valign="top" align="Left">@item.QTY_OFF</td>
                                <td  valign="top" align="Left">@item.QTY_REJECTED</td>
                                <td  valign="top" align="Left">@item.REJECTION_VALUE</td>
                                <td  valign="top" align="Left">@item.DEPT</td>
                                <td  valign="top" align="Left">@item.COMPLAINT_DATE</td>
                                <td  valign="top" align="Left">@item.REJECTIONMEMOPATH</td>
                                <td  valign="top" align="Left">@item.REJECTION_REASON</td>
                                <td  valign="top" align="Left">@item.NO_JI_RES</td>
                                <td  valign="top" align="Left">@item.JI_DATE</td>
                                <td  valign="top" align="Left">@item.COMPLAINTSCASESPATH</td>
                                <td  valign="top" align="Left">@item.STATUS</td>
                                <td  valign="top" align="Left">@item.COMPLAINTSREPORTPATH</td>
                                <td  valign="top" align="Left">@item.DEFECT_DESC</td>
                                <td  valign="top" align="Left">@item.JI_STATUS_DESC</td>
                                <td  valign="top" align="Left">@item.CONCLUSION_DATE</td>
                                <td  valign="top" align="Left">@item.CO_NAME</td>
                                <td  valign="top" align="Left">@item.JI_IE_NAME</td>
                                <td  valign="top" align="Left">@item.ROOT_CAUSE_ANALYSIS</td>
                                <td  valign="top" align="Left">@item.CHK_STATUS</td>
                                <td  valign="top" align="Left">@item.TECH_REF</td>
                                <td  valign="top" align="Left">@item.ACTION_PROPOSED</td>
                                <td  valign="top" align="Left">@item.ANY_OTHER</td>
                                <td  valign="top" align="Left">@item.CAPA_STATUS</td>
                                <td  valign="top" align="Left">@item.DANDAR_STATUS</td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
        
    }
    <br>
</div>


